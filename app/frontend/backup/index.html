<!DOCTYPE html>
<html>
<head>
    <title>Student Management - GUARANTEED</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        h1 { color: #333; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #4CAF50; color: white; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .online { background: #4CAF50; color: white; }
        .offline { background: #f44336; color: white; }
    </style>
</head>
<body>
    <h1>ðŸŽ“ Student Management System</h1>
    <div id="status" class="status">Loading...</div>
    
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Age</th>
                <th>Grade</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody id="students-table">
            <tr><td colspan="5">Loading data...</td></tr>
        </tbody>
    </table>
    
    <script>
        const API_URL = 'http://localhost:30001/api';
        
        async function loadData() {
            try {
                // Try API first
                const response = await fetch(API_URL + '/students');
                if (response.ok) {
                    const students = await response.json();
                    displayStudents(students);
                    document.getElementById('status').className = 'status online';
                    document.getElementById('status').textContent = `âœ… Loaded ${students.length} students from API`;
                    return;
                }
            } catch (error) {
                console.log('API error:', error);
            }
            
            // Fallback
            const demo = [
                {id:1,name:'FALLBACK Student',age:20,grade:'A',email:'fallback@school.com'}
            ];
            displayStudents(demo);
            document.getElementById('status').className = 'status offline';
            document.getElementById('status').textContent = 'âš ï¸ Using fallback data';
        }
        
        function displayStudents(students) {
            const table = document.getElementById('students-table');
            table.innerHTML = students.map(s => `
                <tr>
                    <td>${s.id}</td>
                    <td>${s.name}</td>
                    <td>${s.age}</td>
                    <td>${s.grade}</td>
                    <td>${s.email}</td>
                </tr>
            `).join('');
        }
        
        // Load on page load
        loadData();
    </script>
</body>
</html>
